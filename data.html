
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Entry by Bhuvanesh</title>
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
        crossorigin="anonymous" 
    />
    <style>
        form {
            font-size: 25px !important;
            width: min(800px, 90%);
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            z-index: 9999;
        }
        .popup.show {
            display: block;
        }
    </style>
</head>
<body>
    <form
        id="form"
        class="mx-auto my-5 shadow p-2"
        method="POST"
    >
        <!-- action= will be set by javascript -->
        <div class="mb-1 d-flex">
            <label class="mx-3" for="customer">Name:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="Name"
                name="Name"
                list="customers"
            />
            <datalist id="customers">
                <!-- javascript will add options here -->
            </datalist>
        </div>
        <div class="mb-1 d-flex">
            <label class="mx-3" for="phone">Phone:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="phone"
                name="Phone"
                list="phones"
            />
            <datalist id="phones">
                <!-- javascript will add options here -->
            </datalist>
        </div>
        <div class="mb-1 d-flex">
            <label class="mx-3" for="address">Mail ID:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="Mail"
                name="Mail"
                list="mails"
            />
            <datalist id="mails">
                <!-- javascript will add options here -->                
            </datalist>
        </div>
        <div class="mb-1 d-flex">
            <label class="mx-3" for="message">Message:</label>
            <input
                type="text"
                class="mx-3 form-control"
                id="Message"
                name="Message"
                list="Messages"
            />
            <datalist id="Messages">
                <!-- javascript will add options here -->                
            </datalist>
        </div>        
        <button type="submit" class="btn btn-primary" id="submitBtn">Submit</button>

    </form>

    <!-- Success Popup Modal -->
    <div id="success-popup" class="popup">
        <p>Form submitted successfully!</p>
        <button onclick="closeSuccessPopup()">Close</button>
    </div>

    <script>
        const url = "https://script.google.com/macros/s/AKfycbxr70scFKpoFALuiuSU5Dy01vIuId3n9UVEXNlvF-T3l17EwN1oBk3uPidAMnUD7HpTmw/exec"; // enter your public ('access' - 'anyone') deployment URL (NOT test deployment!)
        const form = document.getElementById('form');
        const submitBtn = document.getElementById('submitBtn');

        form.action = url;

        // Function to handle form submission
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission behavior
            
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Submitting...';

            const formData = new FormData(this); // Get form data

            // Send form data via fetch
            fetch(url, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    // Show success popup
                    document.getElementById('success-popup').classList.add('show');
                    // Reset the form
                    form.reset();
                    // Reset the submit button
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = 'Submit';
                    // Optional: You can redirect to another page after submission
                    // window.location.href = "next-page.html";
                } else {
                    throw new Error('Network response was not ok');
                }
            })
            .catch(error => {
                console.error('Error submitting form:', error);
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Submit';
            });
        });

        // Function to close the success popup
        function closeSuccessPopup() {
            document.getElementById('success-popup').classList.remove('show');
        }
    </script>
</body>
</html>
